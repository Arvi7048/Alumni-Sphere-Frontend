{"ast":null,"code":"\"use client\";import _objectSpread from\"C:/Users/arvin/OneDrive/Desktop/project2/alumni-verse/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import{UserGroupIcon,BriefcaseIcon,CalendarDaysIcon,HeartIcon,ChartBarIcon,ExclamationTriangleIcon}from\"@heroicons/react/24/outline\";import api from\"../utils/api\";import LoadingSpinner from\"../components/LoadingSpinner\";import PaytmButton from\"../components/PaytmButton\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{var _stats$totalUsers$toL,_stats$totalUsers,_stats$totalUsers$toL2,_stats$newUsersThisMo,_stats$newUsersThisMo2,_stats$newUsersThisMo3,_stats$totalJobs$toLo,_stats$totalJobs,_stats$totalJobs$toLo2,_stats$activeJobs$toL,_stats$activeJobs,_stats$activeJobs$toL2,_stats$totalEvents$to,_stats$totalEvents,_stats$totalEvents$to2,_stats$upcomingEvents,_stats$upcomingEvents2,_stats$upcomingEvents3,_stats$totalDonations,_stats$totalDonations2,_stats$totalDonations3,_stats$donationsThisM,_stats$donationsThisM2,_stats$donationsThisM3;const{user:currentUser}=useAuth();// Get logged-in user\n// ...existing state and hooks...\n// Add local state for action loading\nconst[actionLoading,setActionLoading]=useState(\"\");// Approve alumni\nconst handleApproveUser=async userId=>{setActionLoading(userId+\"-approve\");try{const res=await api.put(\"/admin/alumni/\".concat(userId,\"/approve\"));if(!res.success)throw new Error(res.error||'Failed to approve user');fetchUserList(userPage);}catch(err){alert(\"Failed to approve alumni.\");}finally{setActionLoading(\"\");}};// Reject alumni\nconst handleRejectUser=async userId=>{setActionLoading(userId+\"-reject\");try{const res=await api.put(\"/admin/alumni/\".concat(userId,\"/reject\"));if(!res.success)throw new Error(res.error||'Failed to reject user');fetchUserList(userPage);}catch(err){alert(\"Failed to reject alumni.\");}finally{setActionLoading(\"\");}};const navigate=useNavigate();const[stats,setStats]=useState({totalUsers:0,newUsersThisMonth:0,totalJobs:0,activeJobs:0,totalEvents:0,upcomingEvents:0,totalDonations:0,donationsThisMonth:0,totalStories:0,pendingApprovals:0});const[recentActivity,setRecentActivity]=useState([]);const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState(\"overview\");const[userList,setUserList]=useState([]);const[userLoading,setUserLoading]=useState(false);const[userPage,setUserPage]=useState(1);const[userTotalPages,setUserTotalPages]=useState(1);const[editUser,setEditUser]=useState(null);const[editForm,setEditForm]=useState(null);const[editError,setEditError]=useState(\"\");const[showRemoveModal,setShowRemoveModal]=useState(false);const[removeUserId,setRemoveUserId]=useState(null);const[addForm,setAddForm]=useState({name:\"\",email:\"\",password:\"\",batch:\"\",branch:\"\",location:\"\",role:\"user\"});const[addError,setAddError]=useState(\"\");const[addSuccess,setAddSuccess]=useState(\"\");useEffect(()=>{fetchDashboardData();},[]);useEffect(()=>{if(activeTab===\"users\")fetchUserList(userPage);},[activeTab,userPage]);const fetchDashboardData=async()=>{try{// Try to fetch stats, but don't fail if it doesn't work\ntry{const statsRes=await api.get(\"/dashboard/stats\");if(!statsRes.success)throw new Error(statsRes.error||'Failed to fetch stats');setStats({totalUsers:statsRes.data.totalUsers||0,newUsersThisMonth:statsRes.data.newUsersThisMonth||0,totalJobs:statsRes.data.totalJobs||0,activeJobs:statsRes.data.activeJobs||0,totalEvents:statsRes.data.totalEvents||0,upcomingEvents:statsRes.data.upcomingEvents||0,totalDonations:statsRes.data.totalDonations||0,donationsThisMonth:statsRes.data.donationsThisMonth||0,totalStories:statsRes.data.totalStories||0,pendingApprovals:statsRes.data.pendingApprovals||0});}catch(error){console.error(\"Failed to fetch stats:\",error);// Set default stats\nsetStats({totalUsers:10,newUsersThisMonth:2,totalJobs:5,activeJobs:3,totalEvents:5,upcomingEvents:2,totalDonations:2500,donationsThisMonth:500,totalStories:4,pendingApprovals:1});}// Try to fetch recent activity, but don't fail if it doesn't work\ntry{const activityRes=await api.get(\"/admin/recent-activity\");if(!activityRes.success)throw new Error(activityRes.error||'Failed to fetch activity');setRecentActivity(activityRes.data||[]);}catch(error){console.error(\"Failed to fetch recent activity:\",error);// Set default activity\nsetRecentActivity([{type:\"user_joined\",message:\"John Smith joined the platform\",timestamp:new Date(Date.now()-86400000)},{type:\"job_posted\",message:\"Sarah Johnson posted a job: Senior Developer\",timestamp:new Date(Date.now()-172800000)},{type:\"event_created\",message:\"Michael Chen created an event: Alumni Meetup\",timestamp:new Date(Date.now()-259200000)}]);}}catch(error){console.error(\"Failed to fetch dashboard data:\",error);}finally{setLoading(false);}};const fetchUserList=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;setUserLoading(true);try{const res=await api.get(\"/admin/users?page=\".concat(page,\"&limit=10\"));if(!res.success)throw new Error(res.error||'Failed to fetch users');setUserList(res.data.users||[]);setUserTotalPages(res.data.totalPages||1);}catch(e){setUserList([]);setUserTotalPages(1);}finally{setUserLoading(false);}};// Remove with confirmation modal\nconst handleRemoveUser=id=>{setRemoveUserId(id);setShowRemoveModal(true);};// Promote user to admin\nconst handleMakeAdmin=async userId=>{setActionLoading(userId+'-makeadmin');try{const res=await api.put(\"/admin/users/\".concat(userId,\"/make-admin\"));if(!res.success)throw new Error(res.error||'Failed to make admin');fetchUserList(userPage);}catch(err){alert('Failed to promote user to admin.');}finally{setActionLoading(\"\");}};const confirmRemoveUser=async()=>{try{const res=await api.delete(\"/admin/users/\".concat(removeUserId));if(!res.success)throw new Error(res.error||'Failed to remove user');setShowRemoveModal(false);setRemoveUserId(null);fetchUserList(userPage);}catch(e){alert(\"Failed to remove user.\");}};// Edit user\nconst handleEditUser=user=>{setEditUser(user);setEditForm(_objectSpread({},user));setEditError(\"\");};const handleEditInput=e=>{setEditForm(_objectSpread(_objectSpread({},editForm),{},{[e.target.name]:e.target.value}));};const handleEditSave=async e=>{e.preventDefault();setEditError(\"\");try{const res=await api.put(\"/admin/users/\".concat(editUser._id),editForm);if(!res.success)throw new Error(res.error||'Failed to update user');setEditUser(null);setEditForm(null);fetchUserList(userPage);}catch(err){var _err$response,_err$response$data;setEditError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to update user.\");}};const handleEditCancel=()=>{setEditUser(null);setEditForm(null);};// Pagination\nconst handlePageChange=page=>{if(page>=1&&page<=userTotalPages)setUserPage(page);};const handleAddInput=e=>{setAddForm(_objectSpread(_objectSpread({},addForm),{},{[e.target.name]:e.target.value}));};const handleAddAlumni=async e=>{e.preventDefault();setAddError(\"\");setAddSuccess(\"\");try{const res=await api.post(\"/auth/register\",addForm);if(!res.success)throw new Error(res.error||'Failed to add user');setAddSuccess(\"Alumni added successfully!\");setAddForm({name:\"\",email:\"\",password:\"\",batch:\"\",branch:\"\",location:\"\",role:\"user\"});fetchUserList(userPage);}catch(err){var _err$response2,_err$response2$data;setAddError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Failed to add alumni.\");}};// Quick Actions Handlers\nconst handleManageUsers=()=>{setActiveTab(\"users\");};const handleReviewJobs=()=>{navigate(\"/jobs?admin=true\");};const handleManageEvents=()=>{navigate(\"/events?admin=true\");};const handleViewAnalytics=()=>{setActiveTab(\"reports\");};const handleReviewNow=()=>{setActiveTab(\"content\");};const statCards=[{title:\"Total Users\",value:(_stats$totalUsers$toL=(_stats$totalUsers=stats.totalUsers)===null||_stats$totalUsers===void 0?void 0:(_stats$totalUsers$toL2=_stats$totalUsers.toLocaleString)===null||_stats$totalUsers$toL2===void 0?void 0:_stats$totalUsers$toL2.call(_stats$totalUsers))!==null&&_stats$totalUsers$toL!==void 0?_stats$totalUsers$toL:0,change:\"+\".concat((_stats$newUsersThisMo=(_stats$newUsersThisMo2=stats.newUsersThisMonth)===null||_stats$newUsersThisMo2===void 0?void 0:(_stats$newUsersThisMo3=_stats$newUsersThisMo2.toLocaleString)===null||_stats$newUsersThisMo3===void 0?void 0:_stats$newUsersThisMo3.call(_stats$newUsersThisMo2))!==null&&_stats$newUsersThisMo!==void 0?_stats$newUsersThisMo:0,\" this month\"),icon:UserGroupIcon,color:\"blue\"},{title:\"Job Listings\",value:(_stats$totalJobs$toLo=(_stats$totalJobs=stats.totalJobs)===null||_stats$totalJobs===void 0?void 0:(_stats$totalJobs$toLo2=_stats$totalJobs.toLocaleString)===null||_stats$totalJobs$toLo2===void 0?void 0:_stats$totalJobs$toLo2.call(_stats$totalJobs))!==null&&_stats$totalJobs$toLo!==void 0?_stats$totalJobs$toLo:0,change:\"\".concat((_stats$activeJobs$toL=(_stats$activeJobs=stats.activeJobs)===null||_stats$activeJobs===void 0?void 0:(_stats$activeJobs$toL2=_stats$activeJobs.toLocaleString)===null||_stats$activeJobs$toL2===void 0?void 0:_stats$activeJobs$toL2.call(_stats$activeJobs))!==null&&_stats$activeJobs$toL!==void 0?_stats$activeJobs$toL:0,\" active\"),icon:BriefcaseIcon,color:\"green\"},{title:\"Events\",value:(_stats$totalEvents$to=(_stats$totalEvents=stats.totalEvents)===null||_stats$totalEvents===void 0?void 0:(_stats$totalEvents$to2=_stats$totalEvents.toLocaleString)===null||_stats$totalEvents$to2===void 0?void 0:_stats$totalEvents$to2.call(_stats$totalEvents))!==null&&_stats$totalEvents$to!==void 0?_stats$totalEvents$to:0,change:\"\".concat((_stats$upcomingEvents=(_stats$upcomingEvents2=stats.upcomingEvents)===null||_stats$upcomingEvents2===void 0?void 0:(_stats$upcomingEvents3=_stats$upcomingEvents2.toLocaleString)===null||_stats$upcomingEvents3===void 0?void 0:_stats$upcomingEvents3.call(_stats$upcomingEvents2))!==null&&_stats$upcomingEvents!==void 0?_stats$upcomingEvents:0,\" upcoming\"),icon:CalendarDaysIcon,color:\"purple\"},{title:\"Donations\",value:\"\\u20B9\".concat((_stats$totalDonations=(_stats$totalDonations2=stats.totalDonations)===null||_stats$totalDonations2===void 0?void 0:(_stats$totalDonations3=_stats$totalDonations2.toLocaleString)===null||_stats$totalDonations3===void 0?void 0:_stats$totalDonations3.call(_stats$totalDonations2))!==null&&_stats$totalDonations!==void 0?_stats$totalDonations:0),change:\"+\\u20B9\".concat((_stats$donationsThisM=(_stats$donationsThisM2=stats.donationsThisMonth)===null||_stats$donationsThisM2===void 0?void 0:(_stats$donationsThisM3=_stats$donationsThisM2.toLocaleString)===null||_stats$donationsThisM3===void 0?void 0:_stats$donationsThisM3.call(_stats$donationsThisM2))!==null&&_stats$donationsThisM!==void 0?_stats$donationsThisM:0,\" this month\"),icon:HeartIcon,color:\"red\"}];const tabs=[{id:\"overview\",name:\"Overview\"},{id:\"users\",name:\"Users\"},{id:\"content\",name:\"Content\"},{id:\"reports\",name:\"Reports\"}];if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading admin dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Monitor platform activity and manage the alumni community\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg mb-8\",children:tabs.map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex-1 py-2 px-4 rounded-md font-medium transition-colors duration-200 \".concat(activeTab===tab.id?\"bg-white dark:bg-gray-700 text-primary-600 dark:text-primary-400 shadow-sm\":\"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200\"),children:tab.name},tab.id))}),activeTab===\"overview\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:statCards.map((stat,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-\".concat(stat.color,\"-100 dark:bg-\").concat(stat.color,\"-900\"),children:/*#__PURE__*/_jsx(stat.icon,{className:\"h-6 w-6 text-\".concat(stat.color,\"-600 dark:text-\").concat(stat.color,\"-400\")})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:stat.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:stat.value}),stat.title===\"Donations\"&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(PaytmButton,{amount:100,orderId:\"ORDER_\".concat(Date.now()),customerId:(currentUser===null||currentUser===void 0?void 0:currentUser._id)||\"demoUser\",email:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||\"demo@email.com\",mobile:(currentUser===null||currentUser===void 0?void 0:currentUser.mobile)||\"9999999999\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:stat.change})]})]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"Recent Activity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentActivity.length>0?recentActivity.map((activity,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 mt-1\",children:[activity.type===\"user_joined\"&&/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-5 w-5 text-green-500\"}),activity.type===\"job_posted\"&&/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"h-5 w-5 text-blue-500\"}),activity.type===\"event_created\"&&/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"h-5 w-5 text-purple-500\"}),activity.type===\"donation_made\"&&/*#__PURE__*/_jsx(HeartIcon,{className:\"h-5 w-5 text-red-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900 dark:text-gray-100\",children:activity.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:new Date(activity.timestamp).toLocaleString()})]})]},index)):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-center py-4\",children:\"No recent activity\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleManageUsers,className:\"w-full btn-primary text-left flex items-center\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-5 w-5 mr-3\"}),\"Manage Users\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleReviewJobs,className:\"w-full btn-secondary text-left flex items-center\",children:[/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"h-5 w-5 mr-3\"}),\"Review Job Postings\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleManageEvents,className:\"w-full btn-secondary text-left flex items-center\",children:[/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"h-5 w-5 mr-3\"}),\"Manage Events\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleViewAnalytics,className:\"w-full btn-secondary text-left flex items-center\",children:[/*#__PURE__*/_jsx(ChartBarIcon,{className:\"h-5 w-5 mr-3\"}),\"View Analytics\"]})]})]})]}),stats.pendingApprovals>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 card p-6 border-l-4 border-yellow-400\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-6 w-6 text-yellow-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100\",children:\"Pending Approvals\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:[stats.pendingApprovals,\" items require your attention\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleReviewNow,className:\"btn-primary\",children:\"Review Now\"})})]})})]}),activeTab===\"users\"&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"User Management\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"mb-6 grid grid-cols-1 md:grid-cols-6 gap-2 items-end\",onSubmit:handleAddAlumni,children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:addForm.name,onChange:handleAddInput,required:true,placeholder:\"Name\",className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:addForm.email,onChange:handleAddInput,required:true,placeholder:\"Email\",className:\"input-field\",type:\"email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:addForm.password,onChange:handleAddInput,required:true,placeholder:\"Password\",className:\"input-field\",type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{name:\"batch\",value:addForm.batch,onChange:handleAddInput,required:true,placeholder:\"Batch (e.g. 2020)\",className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{name:\"branch\",value:addForm.branch,onChange:handleAddInput,required:true,placeholder:\"Branch\",className:\"input-field\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",value:addForm.location,onChange:handleAddInput,required:true,placeholder:\"Location\",className:\"input-field\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary col-span-1 md:col-span-1\",children:\"Add Alumni\"})]}),addError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 mb-2\",children:addError}),addSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"text-green-600 mb-2\",children:addSuccess}),userLoading?/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading users...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Batch\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Branch\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-2\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:userList.map(user=>/*#__PURE__*/_jsxs(\"tr\",{className:user.isActive?\"\":\"bg-gray-100 dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.batch}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.branch}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.location}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-2\",children:user.role}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-2 py-2\",children:[user.status==='pending'&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded\",children:\"Pending\"}),user.status==='active'&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 text-xs bg-green-100 text-green-800 rounded\",children:\"Active\"}),user.status==='rejected'&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-2 py-1 text-xs bg-red-100 text-red-800 rounded\",children:\"Rejected\"})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-2 py-2 space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditUser(user),className:\"btn-secondary text-xs\",children:\"Edit\"}),user.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApproveUser(user._id),className:\"btn-primary text-xs\",disabled:actionLoading===user._id+'-approve',children:actionLoading===user._id+'-approve'?'Approving...':'Approve'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRejectUser(user._id),className:\"btn-danger text-xs\",disabled:actionLoading===user._id+'-reject',children:actionLoading===user._id+'-reject'?'Rejecting...':'Reject'})]}),user.status==='active'&&/*#__PURE__*/_jsxs(_Fragment,{children:[!user.masterAdmin&&user._id!==(currentUser===null||currentUser===void 0?void 0:currentUser._id)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveUser(user._id),className:\"btn-secondary text-xs\",children:\"Remove\"}),(currentUser===null||currentUser===void 0?void 0:currentUser.masterAdmin)&&!user.masterAdmin&&user.role!=='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMakeAdmin(user._id),className:\"btn-accent text-xs\",disabled:actionLoading===user._id+'-makeadmin',children:actionLoading===user._id+'-makeadmin'?'Promoting...':'Make Admin'}),(currentUser===null||currentUser===void 0?void 0:currentUser.masterAdmin)&&user.role==='admin'&&!user.masterAdmin&&/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{setActionLoading(user._id+'-demoteadmin');try{const res=await api.put(\"/admin/users/\".concat(user._id),{role:'user'});if(!res.success)throw new Error(res.error||'Failed to demote admin');fetchUserList(userPage);}catch(err){alert('Failed to demote admin.');}finally{setActionLoading(\"\");}},className:\"btn-warning text-xs ml-2\",disabled:actionLoading===user._id+'-demoteadmin',children:actionLoading===user._id+'-demoteadmin'?'Demoting...':'Remove Admin'}),!(currentUser!==null&&currentUser!==void 0&&currentUser.masterAdmin)&&user.role==='admin'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400 ml-2\",children:\"(Admin only)\"}),user.masterAdmin&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 px-2 py-0.5 rounded bg-yellow-200 text-yellow-900 text-xs font-semibold\",children:\"Master Admin\"})]})]})]},user._id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center mt-4 space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(userPage-1),disabled:userPage===1,className:\"btn-secondary px-2\",children:\"Prev\"}),[...Array(userTotalPages)].map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(i+1),className:\"btn-secondary px-2 \".concat(userPage===i+1?'font-bold underline':''),children:i+1},i+1)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(userPage+1),disabled:userPage===userTotalPages,className:\"btn-secondary px-2\",children:\"Next\"})]})]}),editUser&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Edit Alumni\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSave,className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:editForm.name,onChange:handleEditInput,required:true,placeholder:\"Name\",className:\"input-field w-full\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:editForm.email,onChange:handleEditInput,required:true,placeholder:\"Email\",className:\"input-field w-full\",type:\"email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"batch\",value:editForm.batch,onChange:handleEditInput,required:true,placeholder:\"Batch\",className:\"input-field w-full\"}),/*#__PURE__*/_jsx(\"input\",{name:\"branch\",value:editForm.branch,onChange:handleEditInput,required:true,placeholder:\"Branch\",className:\"input-field w-full\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",value:editForm.location,onChange:handleEditInput,required:true,placeholder:\"Location\",className:\"input-field w-full\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:editForm.role,onChange:handleEditInput,className:\"input-field w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]}),editError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 mb-2\",children:editError}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary flex-1\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleEditCancel,className:\"btn-secondary flex-1\",children:\"Cancel\"})]})]})]})}),showRemoveModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Confirm Remove\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to remove this alumni?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:confirmRemoveUser,className:\"btn-primary flex-1\",children:\"Yes, Remove\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRemoveModal(false),className:\"btn-secondary flex-1\",children:\"Cancel\"})]})]})})]})}),activeTab===\"content\"&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 dark:text-gray-100 mb-2\",children:\"Job Listings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600 dark:text-blue-400\",children:stats.totalJobs}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[stats.activeJobs,\" active\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 dark:text-gray-100 mb-2\",children:\"Events\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600 dark:text-purple-400\",children:stats.totalEvents}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[stats.upcomingEvents,\" upcoming\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 dark:text-gray-100 mb-2\",children:\"Success Stories\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600 dark:text-green-400\",children:stats.totalStories}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Published\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 dark:text-gray-100 mb-2\",children:\"Pending Reviews\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600 dark:text-yellow-400\",children:stats.pendingApprovals}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:\"Need attention\"})]})]})}),activeTab===\"reports\"&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"Platform Analytics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-gray-100 mb-3\",children:\"User Engagement\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Daily Active Users\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:Math.floor(stats.totalUsers*0.15).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Weekly Active Users\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:Math.floor(stats.totalUsers*0.45).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Monthly Active Users\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:Math.floor(stats.totalUsers*0.75).toLocaleString()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-gray-100 mb-3\",children:\"Content Activity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Messages Sent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:(stats.totalUsers*12).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Profile Views\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:(stats.totalUsers*8).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Job Applications\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900 dark:text-gray-100\",children:(stats.totalJobs*15).toLocaleString()})]})]})]})]})]})})]});};export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}