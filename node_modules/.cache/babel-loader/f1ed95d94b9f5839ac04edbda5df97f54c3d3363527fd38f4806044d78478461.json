{"ast":null,"code":"\"use client\";import _objectSpread from\"C:/Users/arvin/OneDrive/Desktop/project2/alumni-verse/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import{EyeIcon,EyeSlashIcon}from\"@heroicons/react/24/outline\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{var _location$state,_location$state$from;const[formData,setFormData]=useState({email:\"\",password:\"\"});const[showPassword,setShowPassword]=useState(false);const[loading,setLoading]=useState(false);const[error,setError]=useState(\"\");const{login,isAuthenticated,clearErrors}=useAuth();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";useEffect(()=>{if(isAuthenticated&&location.pathname!=='/'){navigate(from,{replace:true});}},[isAuthenticated,navigate,from,location.pathname]);useEffect(()=>{clearErrors();},[clearErrors]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError(\"\");};const handleSubmit=async e=>{e.preventDefault();// Basic validation\nif(!formData.email||!formData.password){setError('Please enter both email and password');return;}setLoading(true);setError('');try{// Pass formData object with email and password\nconst result=await login(formData);if(!result.success){// If login fails but we don't have a specific error message\nif(!result.error){setError('Login failed. Please check your credentials and try again.');}else{setError(result.error);}}else{// Clear form on successful login\nsetFormData({email:'',password:''});// Redirect will be handled by the useEffect that watches isAuthenticated\n}}catch(err){console.error('Login error:',err);setError('An unexpected error occurred. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-3xl font-extrabold text-gray-900 dark:text-white\",children:\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600 dark:text-gray-300\",children:\"Sign in to your alumni account to continue\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 p-4 rounded-md bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-500 dark:text-red-400\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800 dark:text-red-200\",children:error})})]})}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"remember\",value:\"true\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,className:\"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm\",placeholder:\"you@example.com\",value:formData.email,onChange:handleChange,disabled:loading})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:showPassword?\"text\":\"password\",autoComplete:\"current-password\",required:true,className:\"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white sm:text-sm pr-10\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:formData.password,onChange:handleChange,disabled:loading}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",onClick:()=>setShowPassword(!showPassword),disabled:loading,children:showPassword?/*#__PURE__*/_jsx(EyeSlashIcon,{className:\"h-5 w-5 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300\"}):/*#__PURE__*/_jsx(EyeIcon,{className:\"h-5 w-5 text-gray-400 hover:text-gray-500 dark:text-gray-400 dark:hover:text-gray-300\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"remember-me\",name:\"remember-me\",type:\"checkbox\",className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"remember-me\",className:\"ml-2 block text-sm text-gray-700 dark:text-gray-300\",children:\"Remember me\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:/*#__PURE__*/_jsx(Link,{to:\"/otp-forgot-password\",className:\"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300\",children:\"Forgot your password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white \".concat(loading?'bg-primary-400 dark:bg-primary-600 cursor-not-allowed':'bg-primary-600 hover:bg-primary-700 dark:bg-primary-600 dark:hover:bg-primary-700',\" focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\"),disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Signing in...\"]}):'Sign in to your account'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative my-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full border-t border-gray-300 dark:border-gray-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400\",children:\"New to our platform?\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/otp-signup\",className:\"w-full flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200\",children:\"Create a new account\"})})]})]})]})});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}