{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import{UserGroupIcon,BriefcaseIcon,CalendarDaysIcon,ChatBubbleLeftRightIcon,HeartIcon,TrophyIcon}from\"@heroicons/react/24/outline\";import api from\"../utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{var _stats$totalJobs$toLo,_stats$totalJobs,_stats$totalJobs$toLo2,_stats$totalEvents$to,_stats$totalEvents,_stats$totalEvents$to2,_stats$totalDonations,_stats$totalDonations2,_stats$totalDonations3;const{user}=useAuth();const[stats,setStats]=useState({totalAlumni:0,activeJobs:0,upcomingEvents:0,totalDonations:0});const[recentActivities,setRecentActivities]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardData();// eslint-disable-next-line\n},[user]);const fetchDashboardData=async()=>{try{let statsRes,activitiesRes;// Use dashboard stats endpoint (now has same data as admin)\n[statsRes,activitiesRes]=await Promise.all([api.get(\"/dashboard/stats\"),api.get(\"/dashboard/activities\")]);if(!statsRes.success)throw new Error(statsRes.error||'Failed to fetch stats');if(!activitiesRes.success)throw new Error(activitiesRes.error||'Failed to fetch activities');// Dashboard stats now includes all admin data\nsetStats({totalAlumni:statsRes.data.totalUsers||0,totalJobs:statsRes.data.totalJobs||0,totalEvents:statsRes.data.totalEvents||0,totalDonations:statsRes.data.totalDonations||0,activeJobs:statsRes.data.activeJobs||0,upcomingEvents:statsRes.data.upcomingEvents||0});setRecentActivities(activitiesRes.data||[]);}catch(error){console.error(\"Failed to fetch dashboard data:\",error);}finally{setLoading(false);}};const quickActions=[{name:\"Browse Alumni\",description:\"Connect with fellow alumni\",href:\"/directory\",icon:UserGroupIcon,color:\"bg-blue-500\"},{name:\"Find Jobs\",description:\"Explore career opportunities\",href:\"/jobs\",icon:BriefcaseIcon,color:\"bg-green-500\"},{name:\"Upcoming Events\",description:\"Join alumni events\",href:\"/events\",icon:CalendarDaysIcon,color:\"bg-purple-500\"},{name:\"Start Chatting\",description:\"Message other alumni\",href:\"/chat\",icon:ChatBubbleLeftRightIcon,color:\"bg-pink-500\"},{name:\"Make Donation\",description:\"Support your alma mater\",href:\"/donations\",icon:HeartIcon,color:\"bg-red-500\"},{name:\"Share Story\",description:\"Inspire others with your journey\",href:\"/stories\",icon:TrophyIcon,color:\"bg-yellow-500\"}];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:[\"Welcome back, \",user===null||user===void 0?void 0:user.name,\"! \\uD83D\\uDC4B\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Stay connected with your Alumni Verse and explore new opportunities.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-blue-100 dark:bg-blue-900\",children:/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-6 w-6 text-blue-600 dark:text-blue-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Alumni\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:((user===null||user===void 0?void 0:user.role)==='admin'?stats.totalAlumni:stats.totalAlumni).toLocaleString()})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-green-100 dark:bg-green-900\",children:/*#__PURE__*/_jsx(BriefcaseIcon,{className:\"h-6 w-6 text-green-600 dark:text-green-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:(_stats$totalJobs$toLo=(_stats$totalJobs=stats.totalJobs)===null||_stats$totalJobs===void 0?void 0:(_stats$totalJobs$toLo2=_stats$totalJobs.toLocaleString)===null||_stats$totalJobs$toLo2===void 0?void 0:_stats$totalJobs$toLo2.call(_stats$totalJobs))!==null&&_stats$totalJobs$toLo!==void 0?_stats$totalJobs$toLo:0})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-purple-100 dark:bg-purple-900\",children:/*#__PURE__*/_jsx(CalendarDaysIcon,{className:\"h-6 w-6 text-purple-600 dark:text-purple-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Events\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:(_stats$totalEvents$to=(_stats$totalEvents=stats.totalEvents)===null||_stats$totalEvents===void 0?void 0:(_stats$totalEvents$to2=_stats$totalEvents.toLocaleString)===null||_stats$totalEvents$to2===void 0?void 0:_stats$totalEvents$to2.call(_stats$totalEvents))!==null&&_stats$totalEvents$to!==void 0?_stats$totalEvents$to:0})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-full bg-red-100 dark:bg-red-900\",children:/*#__PURE__*/_jsx(HeartIcon,{className:\"h-6 w-6 text-red-600 dark:text-red-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 dark:text-gray-400\",children:\"Total Donations\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-semibold text-gray-900 dark:text-gray-100\",children:[\"\\u20B9\",(_stats$totalDonations=(_stats$totalDonations2=stats.totalDonations)===null||_stats$totalDonations2===void 0?void 0:(_stats$totalDonations3=_stats$totalDonations2.toLocaleString)===null||_stats$totalDonations3===void 0?void 0:_stats$totalDonations3.call(_stats$totalDonations2))!==null&&_stats$totalDonations!==void 0?_stats$totalDonations:0]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6\",children:\"Quick Actions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:quickActions.map(action=>/*#__PURE__*/_jsx(Link,{to:action.href,className:\"card p-6 hover:shadow-lg transition-shadow duration-200 group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(action.color,\" group-hover:scale-110 transition-transform duration-200\"),children:/*#__PURE__*/_jsx(action.icon,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-200\",children:action.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:action.description})]})]})},action.name))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6\",children:\"Recent Activities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-6\",children:recentActivities.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentActivities.slice(0,5)// Only take the 6 most recent activities\n.map((activity,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-primary-600 rounded-full mt-2\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-900 dark:text-gray-100\",children:activity.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:activity.createdAt&&!isNaN(new Date(activity.createdAt))?new Date(activity.createdAt).toLocaleDateString():'-'})]})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-center py-8\",children:\"No recent activities\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12 card p-8 text-center bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-900 dark:to-blue-900\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4\",children:\"Ready to Connect?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-6 max-w-2xl mx-auto\",children:\"Join thousands of alumni who are already networking, sharing opportunities, and making a difference in their communities.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 justify-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/directory\",className:\"btn-primary\",children:\"Explore Alumni Directory\"}),/*#__PURE__*/_jsx(Link,{to:\"/events\",className:\"btn-secondary\",children:\"View Upcoming Events\"})]})]})]});};export default Home;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}