{"ast":null,"code":"\"use client\";import _objectSpread from\"C:/Users/arvin/OneDrive/Desktop/project2/alumni-verse/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import{useAuth}from\"../context/AuthContext\";import{HeartIcon,BanknotesIcon,TrophyIcon}from\"@heroicons/react/24/outline\";import api from\"../utils/api\";import LoadingSpinner from\"../components/LoadingSpinner\";import PaytmButton from\"../components/PaytmButton\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Donations=()=>{const{user}=useAuth();const[donationStats,setDonationStats]=useState({totalRaised:0,totalDonors:0,recentDonations:[]});const[loading,setLoading]=useState(true);const[donating,setDonating]=useState(false);const[selectedAmount,setSelectedAmount]=useState(\"\");const[customAmount,setCustomAmount]=useState(\"\");const[donationForm,setDonationForm]=useState({amount:\"\",message:\"\",anonymous:false,cardNumber:\"\",expiryDate:\"\",cvv:\"\",cardholderName:\"\"});const predefinedAmounts=[2000,5000,10000,20000,50000,100000];useEffect(()=>{fetchDonationStats();},[]);const fetchDonationStats=async()=>{try{const res=await api.get(\"/donations/stats\");if(res.success){setDonationStats(res.data);}else{throw new Error(res.error||'Failed to fetch donation stats');}}catch(error){console.error(\"Failed to fetch donation stats:\",error);}finally{setLoading(false);}};const handleAmountSelect=amount=>{setSelectedAmount(amount);setCustomAmount(\"\");setDonationForm(_objectSpread(_objectSpread({},donationForm),{},{amount:amount}));};const handleCustomAmountChange=e=>{const value=e.target.value;setCustomAmount(value);setSelectedAmount(\"\");setDonationForm(_objectSpread(_objectSpread({},donationForm),{},{amount:value}));};const handleFormChange=e=>{const{name,value,type,checked}=e.target;setDonationForm(_objectSpread(_objectSpread({},donationForm),{},{[name]:type===\"checkbox\"?checked:value}));};const handleDonate=async e=>{e.preventDefault();setDonating(true);try{// In a real application, you would integrate with a payment processor like Stripe\nconst donationData={amount:Number.parseFloat(donationForm.amount),message:donationForm.message,anonymous:donationForm.anonymous};const res=await api.post(\"/donations\",donationData);if(!res.success)throw new Error(res.error||'Failed to process donation');// Simulate payment processing\nawait new Promise(resolve=>setTimeout(resolve,2000));// Reset form and refresh stats\nsetDonationForm({amount:\"\",message:\"\",anonymous:false,cardNumber:\"\",expiryDate:\"\",cvv:\"\",cardholderName:\"\"});setSelectedAmount(\"\");setCustomAmount(\"\");fetchDonationStats();alert(\"Thank you for your donation! Your contribution makes a difference.\");}catch(error){console.error(\"Failed to process donation:\",error);alert(\"Failed to process donation. Please try again.\");}finally{setDonating(false);}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading donation information...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-12\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4\",children:\"Support Your Alma Mater\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto\",children:\"Your generous donations help fund scholarships, improve facilities, and support the next generation of students. Every contribution makes a difference.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full mb-4\",children:/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-6 w-6 text-green-600 dark:text-green-400\"})}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:[\"\\u20B9\",donationStats.totalRaised.toLocaleString()]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Total Raised\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full mb-4\",children:/*#__PURE__*/_jsx(HeartIcon,{className:\"h-6 w-6 text-blue-600 dark:text-blue-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:donationStats.totalDonors}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Generous Donors\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-flex items-center justify-center w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-full mb-4\",children:/*#__PURE__*/_jsx(TrophyIcon,{className:\"h-6 w-6 text-purple-600 dark:text-purple-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2\",children:Math.floor(donationStats.totalRaised/1000)}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Scholarships Funded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6\",children:\"Make a Donation\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleDonate,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4\",children:\"Select Amount\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-3 mb-4\",children:predefinedAmounts.map(amount=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>handleAmountSelect(amount),className:\"p-3 rounded-lg border-2 font-medium transition-colors duration-200 \".concat(selectedAmount===amount?\"border-primary-600 bg-primary-50 dark:bg-primary-900 text-primary-700 dark:text-primary-300\":\"border-gray-300 dark:border-gray-600 hover:border-primary-400 text-gray-700 dark:text-gray-300\"),children:[\"\\u20B9\",amount]},amount))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Custom Amount\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400\",children:\"\\u20B9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",step:\"0.01\",value:customAmount,onChange:handleCustomAmountChange,className:\"input-field pl-8\",placeholder:\"Enter amount\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\",children:\"Message (Optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",rows:3,value:donationForm.message,onChange:handleFormChange,className:\"input-field\",placeholder:\"Share why you're donating or leave a message for the community...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"anonymous\",name:\"anonymous\",type:\"checkbox\",checked:donationForm.anonymous,onChange:handleFormChange,className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"anonymous\",className:\"ml-2 block text-sm text-gray-700 dark:text-gray-300\",children:\"Make this donation anonymous\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center\",children:\"Pay Securely with Paytm\"}),/*#__PURE__*/_jsx(PaytmButton,{amount:donationForm.amount||customAmount||selectedAmount,orderId:\"DONATION_\".concat(Date.now()),customerId:(user===null||user===void 0?void 0:user._id)||\"guest\",email:(user===null||user===void 0?void 0:user.email)||\"donor@email.com\",mobile:(user===null||user===void 0?void 0:user.mobile)||\"9999999999\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-xs text-gray-500 dark:text-gray-400\",children:\"You will be redirected to Paytm to complete your donation.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!donationForm.amount||donating,className:\"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center py-3\",children:donating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner mr-2\"}),\"Processing Donation...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeartIcon,{className:\"h-5 w-5 mr-2\"}),\"Donate \\u20B9\",donationForm.amount||\"0\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center text-sm text-gray-500 dark:text-gray-400\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDD12 Your payment information is secure and encrypted\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1\",children:\"This is a demo form - no actual payment will be processed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"Your Impact\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(TrophyIcon,{className:\"h-8 w-8 text-blue-600 dark:text-blue-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-gray-100\",children:\"Scholarships\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Help deserving students access quality education\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-8 w-8 text-green-600 dark:text-green-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-gray-100\",children:\"Infrastructure\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Improve campus facilities and learning resources\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(HeartIcon,{className:\"h-8 w-8 text-purple-600 dark:text-purple-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 dark:text-gray-100\",children:\"Community Programs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Support alumni events and networking initiatives\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4\",children:\"Recent Donations\"}),donationStats.recentDonations.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:donationStats.recentDonations.map((donation,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900 dark:text-gray-100\",children:donation.anonymous?\"Anonymous\":donation.donor}),donation.message&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mt-1\",children:[\"\\\"\",donation.message,\"\\\"\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400 mt-1\",children:new Date(donation.date).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-green-600 dark:text-green-400\",children:[\"\\u20B9\",donation.amount]})})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-400 text-center py-4\",children:\"No recent donations to display\"})]})]})]})]});};export default Donations;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}