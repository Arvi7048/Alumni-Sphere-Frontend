{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\arvin\\\\OneDrive\\\\Desktop\\\\project2\\\\alumni-verse\\\\frontend\\\\src\\\\components\\\\PaytmButton.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PaytmButton = ({\n  amount,\n  orderId,\n  customerId,\n  email,\n  mobile\n}) => {\n  _s();\n  const handlePay = useCallback(async () => {\n    // Only proceed in browser environment\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      console.error(\"Cannot process payment in server environment\");\n      return;\n    }\n    try {\n      const res = await axios.post(\"/api/paytm/initiate\", {\n        amount,\n        orderId,\n        customerId,\n        email,\n        mobile\n      });\n      const paytmParams = res.data;\n\n      // Create a form and submit to Paytm\n      const form = document.createElement(\"form\");\n      form.method = \"POST\";\n      form.action = \"https://securegw.paytm.in/theia/processTransaction\";\n      form.style.display = \"none\";\n\n      // Add all parameters as hidden inputs\n      Object.entries(paytmParams).forEach(([key, value]) => {\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.name = key;\n        input.value = value;\n        form.appendChild(input);\n      });\n\n      // Add form to document and submit\n      document.body.appendChild(form);\n      form.submit();\n\n      // Clean up the form after submission\n      setTimeout(() => {\n        if (document.body.contains(form)) {\n          document.body.removeChild(form);\n        }\n      }, 1000);\n    } catch (err) {\n      console.error(\"Payment initiation failed:\", err);\n      alert(\"Failed to initiate payment. Please try again.\");\n    }\n  }, [amount, orderId, customerId, email, mobile]);\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handlePay,\n    className: \"btn btn-primary flex items-center gap-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n      width: \"20\",\n      height: \"20\",\n      viewBox: \"0 0 20 20\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n        width: \"20\",\n        height: \"20\",\n        rx: \"4\",\n        fill: \"#00B9F1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n        x: \"4\",\n        y: \"15\",\n        fontSize: \"10\",\n        fill: \"white\",\n        fontFamily: \"Arial, Helvetica, sans-serif\",\n        children: \"Paytm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), \"Pay with Paytm\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(PaytmButton, \"UiY1xai4Eo/p8re8/lUKXiEFahs=\");\n_c = PaytmButton;\nexport default PaytmButton;\nvar _c;\n$RefreshReg$(_c, \"PaytmButton\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","React","useCallback","axios","jsxDEV","_jsxDEV","PaytmButton","amount","orderId","customerId","email","mobile","handlePay","window","document","console","error","res","post","paytmParams","data","form","createElement","method","action","style","display","Object","entries","forEach","key","value","input","type","name","appendChild","body","submit","setTimeout","contains","removeChild","err","alert","onClick","className","children","width","height","viewBox","fill","xmlns","rx","fileName","lineNumber","columnNumber","x","y","fontSize","fontFamily","_c","$RefreshReg$"],"sources":["C:/Users/arvin/OneDrive/Desktop/project2/alumni-verse/frontend/src/components/PaytmButton.js"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback } from \"react\";\nimport axios from \"axios\";\n\nconst PaytmButton = ({ amount, orderId, customerId, email, mobile }) => {\n  const handlePay = useCallback(async () => {\n    // Only proceed in browser environment\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      console.error(\"Cannot process payment in server environment\");\n      return;\n    }\n\n    try {\n      const res = await axios.post(\"/api/paytm/initiate\", {\n        amount,\n        orderId,\n        customerId,\n        email,\n        mobile,\n      });\n      \n      const paytmParams = res.data;\n      \n      // Create a form and submit to Paytm\n      const form = document.createElement(\"form\");\n      form.method = \"POST\";\n      form.action = \"https://securegw.paytm.in/theia/processTransaction\";\n      form.style.display = \"none\";\n      \n      // Add all parameters as hidden inputs\n      Object.entries(paytmParams).forEach(([key, value]) => {\n        const input = document.createElement(\"input\");\n        input.type = \"hidden\";\n        input.name = key;\n        input.value = value;\n        form.appendChild(input);\n      });\n      \n      // Add form to document and submit\n      document.body.appendChild(form);\n      form.submit();\n      \n      // Clean up the form after submission\n      setTimeout(() => {\n        if (document.body.contains(form)) {\n          document.body.removeChild(form);\n        }\n      }, 1000);\n    } catch (err) {\n      console.error(\"Payment initiation failed:\", err);\n      alert(\"Failed to initiate payment. Please try again.\");\n    }\n  }, [amount, orderId, customerId, email, mobile]);\n\n  return (\n    <button onClick={handlePay} className=\"btn btn-primary flex items-center gap-2\">\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect width=\"20\" height=\"20\" rx=\"4\" fill=\"#00B9F1\"/>\n        <text x=\"4\" y=\"15\" fontSize=\"10\" fill=\"white\" fontFamily=\"Arial, Helvetica, sans-serif\">Paytm</text>\n      </svg>\n      Pay with Paytm\n    </button>\n  );\n};\n\nexport default PaytmButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}